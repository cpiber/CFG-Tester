(this["webpackJsonpcfg-tester"]=this["webpackJsonpcfg-tester"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},120:function(e,t){},122:function(e,t){},155:function(e,t){},156:function(e,t){},16:function(e,t,a){e.exports={textarea:"bodyComponent_textarea__2AEVB"}},17:function(e,t,a){e.exports={area:"textarea_area__1mQmu",title:"textarea_title__3f-Ka"}},198:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(90),i=a.n(s),c=(a(102),a(103),a(25)),l=a.n(c);var o=function(e){return r.a.createElement("header",{className:"".concat(e.className?e.className:""," App-header")},r.a.createElement("h1",null,r.a.createElement("abbr",{title:"Context-free grammar"},"CFG")," Testing suite"))},u=a(10),m=a(50),d=a.n(m),g=a(91),h=!1,p={},b={grammarUpdateCB:function(){}},v=Object(g.a)((function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(""),i=Object(u.a)(s,2),c=i[0],l=i[1],o=function(){var e=d.a.parse(window.location.hash);p.rules="string"===typeof e.rules?e.rules:"",r(p.rules),p.input="string"===typeof e.input?e.input:"",l(p.input)};h||(window.addEventListener("hashchange",o,!1),o(),h=!0);var m=function(){a===p.rules&&c===p.input||(window.location.hash=d.a.stringify(p))};return{rules:a,updateRules:function(e){p.rules=e,r(e),m()},input:c,updateInput:function(e){p.input=e,l(e),m()}}})),f=a(16),E=a.n(f),N=a(51),k=a.n(N),x=a(18),w=a(31),S=a(32),y=/^\s*([A-Z])\s*(?:->|\u2192)\s*(.*)$/,O=/(\\*)([A-Z])/g,j=/(\\*)\|/g,_=/(\\(?:n|r|t|f))|\\(.)/g,C="cfg_maxdepth",G=new(function(){function e(){Object(w.a)(this,e),this.rules=[],this.dict={},this.maxDepth=+(window.localStorage.getItem(C)||15)}return Object(S.a)(e,[{key:"loadRules",value:function(e){this.rules=[];var t=e.split(/\r\n|\r|\n/g);this.dict={};for(var a=y,n=0;n<t.length;n++){var r=t[n];if(""!==r.trim()){var s=r.match(a);if(!s){var i={error:!0,line:n+1};return console.log(i),i}for(var c=[],l=void 0,o=0;null!==(l=j.exec(s[2]));)if(l[1].length%2===0){var u=s[2].substring(o,l.index+l[1].length);c.push(this.branchString(u)),o=j.lastIndex}var m=s[2].substring(o);c.push(this.branchString(m));var d=void 0;s[1]in this.dict?(d=this.dict[s[1]],this.rules[d]=this.rules[d].concat(c)):(d=this.rules.length,this.dict[s[1]]=d,this.rules.push(c))}}for(var g=0;g<this.rules.length;g++)for(var h=this.rules[g],p=0;p<h.length;p++){for(var b=h[p],v=O,f=void 0,E=[],N=0;null!==(f=v.exec(b));)if(f[1].length%2===0&&f[2]in this.dict){var k=b.substring(N,f.index);""!==k&&E.push(k),E.push(this.dict[f[2]]),N=v.lastIndex}var x=b.substring(N);""!==x&&E.push(x),E.length||E.push(""),h[p]=E}return{error:!1}}},{key:"branchString",value:function(e){return"^"===e||"\u03b5"===e||""===e.trim()?"":e.replace(_,"$1$2")}},{key:"expandGenerator",value:function(){var e=k.a.mark(n),t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"S",a=this;function n(t,r,s,i,c){var l,o,u;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i>a.maxDepth)){e.next=3;break}return console.debug("max depth"),e.abrupt("return");case 3:if(!("number"===typeof t&&t in a.rules)){e.next=16;break}l=a.rules[t],o=0;case 6:if(!(o<l.length)){e.next=14;break}if((u=l[o])[0]!==c){e.next=10;break}return e.abrupt("continue",11);case 10:return e.delegateYield(n(u[0],[].concat(Object(x.a)(u.slice(1)),Object(x.a)(r)),s,i+("number"===typeof u[0]?0:1),t),"t0",11);case 11:o++,e.next=6;break;case 14:e.next=22;break;case 16:if(!r.length){e.next=20;break}return e.delegateYield(n(r[0],r.slice(1),s+t,i,t),"t1",18);case 18:e.next=22;break;case 20:return e.next=22,s+t;case 22:case"end":return e.stop()}}),e)}var r=t in this.dict?this.dict[t]:-1;return-1===r?{error:!0,msg:"Symbol not found"}:{error:!1,gen:n(r,[],"",0,-1)}}}]),e}());window.grammar=G;var A=G,I=a(92),R=a.n(I),U=a(17),D=a.n(U);var B=function(e){var t=R()();return r.a.createElement("div",{className:"".concat(D.a.area," ").concat(e.className?e.className:"")},e.title&&r.a.createElement("h2",{className:D.a.title},r.a.createElement("label",{htmlFor:t},e.title)),r.a.createElement("textarea",{id:t,className:"textarea monospace",onChange:e.onChange,draggable:"false",placeholder:e.placeholder?e.placeholder:"Enter text here...",value:e.value,"aria-label":e.aria}),e.children&&r.a.createElement("div",{className:"children"},e.children))},T=0,F="",M=400;var Y=function(e){var t=v.useContainer(),a=Object(n.useState)(["",""]),s=Object(u.a)(a,2),i=s[0],c=s[1],l=Object(n.useState)(!1),o=Object(u.a)(l,2),m=o[0],d=o[1],g=function(){d(!1);var e=A.loadRules(F);e.error?c(["error","Error on line "+e.line]):(c(["ok","Grammar valid"]),b.grammarUpdateCB())};return 0===T&&""!==t.rules&&(F=t.rules,T=window.setTimeout(g,1)),r.a.createElement("div",{className:"".concat(e.className?e.className:""," status-").concat(i[0]," App-bodyComponent")},r.a.createElement(B,{className:E.a.textarea,value:t.rules,onChange:function(e){F=e.target.value,t.updateRules(F),d(!0),c(["",""]),window.clearTimeout(T),T=window.setTimeout(g,M)},title:"Rules",aria:"Rules that describe the grammar"},r.a.createElement("div",{className:"row1"},r.a.createElement("div",{className:"status"},i[1])),r.a.createElement("div",{className:"row2"},r.a.createElement("button",{className:"button secondary",onClick:function(e){e.target.blur(),d(!0),g()},disabled:m},"Regenerate Model"))))};var $=function(e){var t=v.useContainer(),a=Object(n.useState)("Matching is not implemented yet"),s=Object(u.a)(a,2),i=s[0],c=(s[1],Object(n.useState)(!1)),l=Object(u.a)(c,2),o=l[0];return l[1],r.a.createElement("div",{className:"".concat(e.className?e.className:""," App-bodyComponent")},r.a.createElement(B,{className:E.a.textarea,value:t.input,onChange:function(e){return t.updateInput(e.target.value)},title:"Test Input",aria:"Input to match with grammar"},r.a.createElement("div",{className:"row1"},r.a.createElement("span",{className:"status"},i)),r.a.createElement("div",{className:"row2"},r.a.createElement("button",{className:"button secondary",onClick:function(e){e.target.blur()},disabled:o},"Re-Match"))))},P=a(95),Z=a(93),q=a(8),J=a(96),Q=a(94),V=a.n(Q),W="cfg_gen_number",z=function(e){function t(e){var a;Object(w.a)(this,t),(a=Object(P.a)(this,Object(Z.a)(t).call(this,e))).state={stringEls:[],buttonDisabled:!1,number:0,status:["",""]},a.stringnum=0,a.stringGen=void 0,a.grammarUpdated=a.grammarUpdated.bind(Object(q.a)(a)),a.updateGenerator=a.updateGenerator.bind(Object(q.a)(a)),a.clickGenerate=a.clickGenerate.bind(Object(q.a)(a)),a.clickClear=a.clickClear.bind(Object(q.a)(a)),a.updateNum=a.updateNum.bind(Object(q.a)(a)),a.updateStrings=a.updateStrings.bind(Object(q.a)(a)),a.resetStrings=a.resetStrings.bind(Object(q.a)(a));var n=+(window.localStorage.getItem(W)||15);return a.state.number=n>=1?n:1,b.grammarUpdateCB=a.grammarUpdated,a}return Object(J.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.updateStrings(this.props.initialStrings||[])}},{key:"grammarUpdated",value:function(){this.resetStrings(),this.updateGenerator()}},{key:"updateGenerator",value:function(){var e=A.expandGenerator();if(e.error)return console.error(e),void this.setState({status:["error","Error: "+e.msg]});this.setState({status:["",""]}),this.stringGen=e.gen}},{key:"clickGenerate",value:function(e){if(e.target){var t=e.target;if("INPUT"!==t.tagName&&(t.blur(),this.stringGen)){for(var a=[],n=0;n<this.state.number;n++){var r=this.stringGen.next();if(r.done)break;a.push(r.value)}a.length?this.updateStrings(a):this.setState({status:["info","Grammmar exhausted"]})}}}},{key:"clickClear",value:function(e){e.target&&(e.target.blur(),this.resetStrings(),this.updateGenerator())}},{key:"updateNum",value:function(e){var t=+e.target.value;this.setState({number:t>=1?t:1}),window.localStorage.setItem(W,t.toString())}},{key:"updateStrings",value:function(e){var t=this,a=e.map((function(e,a){return r.a.createElement("li",{key:t.stringnum++,className:"monospace"},e.toString().split(/\r\n|\r|\n|\\n/g).map((function(e,t){return r.a.createElement("span",{key:t},e)})))}));this.setState({stringEls:[].concat(Object(x.a)(this.state.stringEls),Object(x.a)(a))})}},{key:"resetStrings",value:function(){this.stringnum=0,this.setState({stringEls:[]})}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(this.props.className?this.props.className:""," status-").concat(this.state.status[0]," App-bodyComponent")},r.a.createElement("div",{className:"".concat(D.a.area," ").concat(E.a.textarea)},r.a.createElement("h2",{className:D.a.title},"Strings"),r.a.createElement("div",{className:V.a.strings},r.a.createElement("ul",null,this.state.stringEls)),r.a.createElement("div",{className:"children"},r.a.createElement("div",{className:"row1"},r.a.createElement("span",{className:"status"},this.state.status[1])),r.a.createElement("div",{className:"row2"},r.a.createElement("button",{className:"button secondary",onClick:this.clickGenerate,disabled:this.state.buttonDisabled,"aria-label":"Get more strings"},"Get ",r.a.createElement("input",{type:"number",className:"input secondary_alt",size:4,value:this.state.number,onChange:this.updateNum,"aria-label":"Number of strings to get"})," more"),r.a.createElement("button",{className:"button secondary",onClick:this.clickClear,"aria-label":"Clear strings"},"Clear")))))}}]),t}(r.a.Component);var H=function(e){return r.a.createElement("div",{className:e.className},r.a.createElement(v.Provider,null,r.a.createElement(Y,{className:e.grid[0]}),r.a.createElement($,{className:e.grid[1]}),r.a.createElement(z,{className:e.grid[2]})))};var K=function(e){var t=(new Date).getFullYear().toString(),a="https://github.com/cpiber/cfg-tester";return r.a.createElement("footer",{className:"".concat(e.className?e.className:""," App-footer")},"2020"===t?t:"".concat("2020","-").concat(t)," by ".concat("Constantin Piber"),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null," :: "),r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"Source")))};var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(o,null),r.a.createElement(H,{className:l.a.grid,grid:[l.a.grid1,l.a.grid2,l.a.grid3]}),r.a.createElement(K,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},25:function(e,t,a){e.exports={grid:"App_grid__2VrY5",grid1:"App_grid1__2oQkD",grid2:"App_grid2__3nSqq",grid3:"App_grid3__1XHgO"}},94:function(e,t,a){e.exports={strings:"GrammarOutput_strings__syveZ"}},97:function(e,t,a){e.exports=a(198)}},[[97,1,2]]]);
//# sourceMappingURL=main.68051f29.chunk.js.map