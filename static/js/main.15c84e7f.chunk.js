(this["webpackJsonpcfg-tester"]=this["webpackJsonpcfg-tester"]||[]).push([[0],{127:function(e,t,n){},148:function(e,t){},150:function(e,t){},160:function(e,t){},162:function(e,t){},189:function(e,t){},190:function(e,t){},195:function(e,t){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var r,a,c=n(2),i=n.n(c),s=n(118),o=n.n(s),u=(n(127),n(20)),l=n(5),h=n(67),f=n(119),b=Object(f.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=function(e){var t=Object(h.parse)(e);return{rules:"string"===typeof t.rules?t.rules:"",input:"string"===typeof t.input?t.input:""}},n=Object(c.useState)(t(e)),r=Object(l.a)(n,2),a=r[0],i=r[1],s=Object(c.useState)(void 0),o=Object(l.a)(s,2),f=o[0],b=o[1],m=Object(c.useCallback)((function(e){return i(Object(u.a)(Object(u.a)({},a),{},{rules:e}))}),[a,i]),d=Object(c.useCallback)((function(e){return i(Object(u.a)(Object(u.a)({},a),{},{input:e}))}),[a,i]),p=Object(c.useCallback)((function(e){return i(t(e))}),[i]);Object(c.useEffect)((function(){var e=function(){return p(window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[p]);var j=Object(c.useRef)(0);return Object(c.useEffect)((function(){return j.current=window.setTimeout((function(){return window.location.hash=Object(h.stringify)(a)}),100),function(){return window.clearTimeout(j.current)}}),[a]),Object(c.useEffect)((function(){window.grammar=f}),[f]),Object(u.a)(Object(u.a)({},a),{},{setRules:m,setInput:d,grammar:f,setGrammar:b,updateQuery:p})})),m=n(38),d=n.n(m),p=n(19),j=function(e,t,n){return Math.min(Math.max(e,t),n)},v=n(26),y=n.n(v),g=n(68),O=n.n(g),w=n(27),x=n.n(w),S=n(0),k="cfg_gen_number",N=j(+(window.localStorage.getItem(k)||15),1,999),E=function(e){var t=e.className,n=b.useContainer().grammar,r=Object(c.useState)(new Set),a=Object(l.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(!1),u=Object(l.a)(o,2),h=u[0],f=u[1],m=Object(c.useState)(N),d=Object(l.a)(m,2),v=d[0],g=d[1],w=Object(c.useState)(["",""]),E=Object(l.a)(w,2),_=E[0],T=E[1],I=function(){s(new Set);try{null===n||void 0===n||n.checkValid(),null===n||void 0===n||n.clear(),f(!1),T(["",""])}catch(e){f(!0),T(["error","".concat(e)])}};Object(c.useEffect)(I,[n]);var C=Object(c.useMemo)((function(){return Object(p.a)(i.values()).map((function(e,t){return Object(S.jsx)("li",{className:"monospace",children:e.split(/\r\n|\r|\n|\\n/g).map((function(e,t){return Object(S.jsx)("span",{className:""===e?O.a.empty:"",children:e||"\u03b5"},t)}))},t)}))}),[i]);return Object(S.jsx)("div",{className:"".concat(t||""," status-").concat(_[0]," App-bodyComponent"),"data-testid":"output",children:Object(S.jsxs)("div",{className:"".concat(x.a.area," ").concat(y.a.textarea),children:[Object(S.jsx)("h2",{className:x.a.title,children:"Strings"}),Object(S.jsx)("div",{className:O.a.strings,children:Object(S.jsx)("ul",{"data-testid":"strings",children:C})}),Object(S.jsxs)("div",{className:"children",children:[Object(S.jsx)("div",{className:"row1",children:Object(S.jsx)("span",{className:"status",role:"status",children:_[1]})}),Object(S.jsxs)("div",{className:"row2",children:[Object(S.jsxs)("button",{className:"button secondary",onClick:function(e){if(function(e,t){var n=e.target;return"INPUT"!==n.tagName&&(n.blur(),!!t)}(e,n)){f(!0),T(["",""]);var t,r=!1,a=i.size;for(t=0;t<v;t=i.size-a){var c=n.next();if(void 0===c)break;if(c instanceof Error){r=!0,T(["warn",c.message]);break}i.add(c)}s(new Set(i)),t<v&&!r?T(["info","Grammar exhausted"]):f(!1)}},disabled:h,"aria-label":"Get more strings","data-testid":"generate",children:["Get ",Object(S.jsx)("input",{type:"number",className:"input secondary_alt",size:3,value:v,onChange:function(e){var t=j(+e.target.value,1,999);g(t),window.localStorage.setItem(k,t.toString())},"aria-label":"Number of strings to get","data-testid":"number"})," more"]}),Object(S.jsx)("button",{className:"button secondary",onClick:function(e){e.target.blur(),I()},"aria-label":"Clear strings","data-testid":"clear",children:"Clear"})]})]})]})})},_=n(15),T=n(8),I=n(12),C=n(122),B=n(18),R=n(29),A=n(28),G=n(13),L=n.n(G),F=function e(t){Object(T.a)(this,e),this.symbol=t},V=function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"equals",value:function(e){return e instanceof n&&e.symbol===this.symbol}},{key:Symbol.toStringTag,get:function(){return"NonTerminal"}}]),n}(F),M=function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(T.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"equals",value:function(e){return e instanceof n&&e.symbol===this.symbol}},{key:Symbol.toStringTag,get:function(){return"Terminal"}}],[{key:"construct",value:function(e){return P.isEmpty(e)?new P:new n(e)}}]),n}(F),P=function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(T.a)(this,n),t.call(this,"")}return Object(I.a)(n,[{key:Symbol.toStringTag,get:function(){return"EmptySymbol"}}],[{key:"isEmpty",value:function(e){return""===e||"^"===e||"\u03b5"===e}}]),n}(M),z=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(T.a)(this,e),this.rule=t,this.before=n,this.depth=r,this.nonTerminals=a},U=function(){function e(t,n,r,a,c){Object(T.a)(this,e),this.left=t,this.before=n,this.symbol=r,this.after=a,this.origin=c,this.left=t,this.before=n,this.symbol=r,this.after=a,this.origin=c}return Object(I.a)(e,[{key:"isFinished",value:function(){return void 0===this.symbol||this.symbol instanceof P}},{key:"isTerminal",value:function(){return this.symbol instanceof M}},{key:"isNonTerminal",value:function(){return this.symbol instanceof V}},{key:"hash",value:function(){var e=function(e){return e instanceof V?"\x01".concat(e.symbol,"\x01"):(null===e||void 0===e?void 0:e.symbol)||""},t=function(t,n){return t+e(n)};return"".concat(this.left.symbol,"\u2192").concat(this.before.reduce(t,""),"\x02\u2022").concat(e(this.symbol)).concat(this.after.reduce(t,""),"\x03,").concat(this.origin)}}]),e}(),q=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(T.a)(this,e),this.handle=t,this.currentSymbol=n,this.currentInput=r,this.whitespace=a,this.rule=[]};r=Symbol.iterator,a=Symbol.toStringTag;var D=function(){function e(t){Object(T.a)(this,e),this.map=void 0,this.clear=void 0,this.keys=void 0,this.values=void 0,this[r]=void 0,this.map=t?new Map(t.map):new Map,this.clear=this.map.clear.bind(this.map),this.keys=this.map.values.bind(this.map),this.values=this.map.values.bind(this.map),this[Symbol.iterator]=this.values}return Object(I.a)(e,[{key:"size",get:function(){return this.map.size}},{key:"add",value:function(e){return this.map.set(e.hash(),e),this}},{key:"delete",value:function(e){return this.map.delete(e.hash())}},{key:"forEach",value:function(e,t){var n=this;this.map.forEach((function(r,a,c){return e.call(t,r,r,n)}),t)}},{key:"has",value:function(e){return this.map.has(e.hash())}},{key:"entries",value:function(){var e=this;return L.a.mark((function t(){var n,r,a,c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(_.a)(e.map),t.prev=1,n.s();case 3:if((r=n.n()).done){t.next=9;break}return a=Object(l.a)(r.value,2),c=a[1],t.next=7,[c,c];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:return t.abrupt("return",void 0);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))()}},{key:a,get:function(){return"ComparableSet"}}]),e}(),J=/[\u0000-\u0008\u000E-\u001f\u007f-\u009F]/,Q=/\s/,W=/[A-Z]/,Y=/[\\]/,Z=function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(e){var r;for(var a in Object(T.a)(this,n),(r=t.call(this)).parseRules(e,new q(r.parseLeft),Y),r.rules){var c,i=r.rules[a],s=Object(_.a)(i);try{for(s.s();!(c=s.n()).done;){var o=c.value;r.extractTerminals(o)}}catch(u){s.e(u)}finally{s.f()}}return r}return Object(I.a)(n,[{key:"parseLeft",value:function(e,t){if(e.match(Q)){if(t)throw new Error("Unexpected literal '".concat(e,"'"))}else{if(!e.match(W)||void 0!==this.currentState.currentSymbol)throw new Error("Unexpected '".concat(e,"', expected Non-Terminal"));this.currentState=new q(this.parseIndicator,new V(e))}}},{key:"parseIndicator",value:function(e,t){if("-"!==this.currentState.currentInput)if(e.match(Q)){if(t)throw new Error("Unexpected literal '".concat(e,"'"))}else{if(!e.match(/[\u2192-]/))throw new Error("Expected '->' or '\u2192', got '".concat(e,"'"));"-"===e?this.currentState.currentInput="-":this.currentState=new q(this.parseBranches,this.currentState.currentSymbol)}else{if(">"!==e)throw new Error("Expected '>', got '".concat(e,"'"));this.currentState=new q(this.parseBranches,this.currentState.currentSymbol)}}},{key:"parseBranches",value:function(e,t){var n=this.checkBranch(e,t,0!==this.currentState.rule.length);null!==n&&(e.match(W)&&!t?(""===this.currentState.currentInput&&""===this.currentState.whitespace||this.currentState.rule.push(M.construct(this.currentState.currentInput+this.currentState.whitespace)),this.currentState.rule.push(new V(n)),this.currentState.currentInput=""):this.currentState.currentInput+=this.currentState.whitespace+n,this.currentState.whitespace="")}},{key:"checkParseValid",value:function(){if(this.currentState.handle===this.parseIndicator)throw new Error("Unexpected line ending, expected rule indicator")}},{key:"extractTerminals",value:function(e){for(var t=0;t<e.length;t++)e[t]instanceof V&&(e[t].symbol in this.rules||(e[t]=new M(e[t].symbol)));for(var n=e.length-1;n>0;n--)e[n]instanceof M&&e[n-1]instanceof M&&(e[n-1].symbol+=e[n].symbol,e.splice(n,1))}},{key:"clear",value:function(){this.initGenerator("S")}},{key:"checkValid",value:function(){if(Object(C.a)(Object(B.a)(n.prototype),"checkValid",this).call(this),!("S"in this.rules))throw new Error("Startsymbol 'S' not found")}},{key:"matches",value:function(e){return this.match(e,"S")}}]),n}(function(){function e(){Object(T.a)(this,e),this.gen=void 0,this.maxDepth=+(window.localStorage.getItem("cfg_maxdepth")||20),this.maxNonTerms=+(window.localStorage.getItem("cfg_maxnonterm")||10),this.maxIter=+(window.localStorage.getItem("cfg_iter")||5e3),this.currentState=void 0,this.rules={},this.currentState=new q((function(){}))}return Object(I.a)(e,[{key:"next",value:function(){if(!this.gen)throw new Error("Attempted to call .next without a generator, this should never happen!");return this.gen.next().value}},{key:"checkValid",value:function(){for(var e in this.rules){var t,n=this.rules[e],r=Object(_.a)(n);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(0===a.length)throw new Error("Empty rule, this should never happen!");if(1===a.length&&""===a[0].symbol&&!(a[0]instanceof P))throw new Error("Empty symbol that isn't an EmptySymbol, this should never happen!");if(a.length>1&&-1!==a.findIndex((function(e){return e instanceof P||0===e.symbol.length})))throw new Error("EmptySymbol found in a longer rule, this should never happen!")}}catch(c){r.e(c)}finally{r.f()}}}},{key:"parseRules",value:function(e,t,n){this.currentState=t;var r=0,a=0,c=!1;try{for(var i=0;a++,i<e.length;i++){var s=e[i];s.match(J)?console.debug("Purged control character ".concat(s," at ").concat(i)):s.match(n)?c=!0:"\n"===s?(a=0,r++,c||this.endLine(t)):(this.currentState.handle.call(this,s,c),c=!1)}this.endLine(t)}catch(o){throw new Error("".concat(o.message," at line ").concat(r+1,", column ").concat(a))}}},{key:"checkBranch",value:function(e,t,n){return""!==this.currentState.currentInput||t||n||!e.match(Q)?"|"!==e||t?e.match(Q)?(this.currentState.whitespace+=e,null):t?this.toSpecial(e):e:(this.endLine(),null):null}},{key:"toSpecial",value:function(e){return"n"===e?"\n":"t"===e?"\t":"r"===e?"\r":"f"===e?"\f":e}},{key:"endLine",value:function(e){if(this.checkParseValid(),void 0!==this.currentState.currentSymbol){var t=this.currentState.currentSymbol.symbol,n=M.construct(this.currentState.currentInput);0!==this.currentState.rule.length&&n instanceof P||this.currentState.rule.push(n),t in this.rules?this.rules[t].push(this.currentState.rule):this.rules[t]=[this.currentState.rule],e?this.currentState=e:(this.currentState.currentInput="",this.currentState.whitespace="",this.currentState.rule=[])}}},{key:"initGenerator",value:function(e){var t=L.a.mark(a),n=this,r=0;function a(e){var a,c,i,s,o,u,l;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.shift())){t.next=18;break}if(r++,c=n.expandTerminal(a),s=(i=a).rule,o=i.before,u=i.depth,l=i.nonTerminals,void 0!==c){t.next=9;break}return t.next=7,o;case 7:return r=0,t.abrupt("continue",0);case 9:if(!(r>=n.maxIter)){t.next=13;break}return t.next=12,new Error("Iterated ".concat(r," times without finding a new value"));case 12:r=0;case 13:if(!(u>n.maxDepth||l>n.maxNonTerms)){t.next=15;break}return t.abrupt("continue",0);case 15:n.expandNonTerminal(c,s,e,a),t.next=0;break;case 18:return t.abrupt("return",void 0);case 19:case"end":return t.stop()}}),t)}this.gen=a([new z([new V(e)])])}},{key:"expandTerminal",value:function(e){for(var t=e.rule,n=t.shift();n instanceof M;)e.before+=n.symbol,n=t.shift(),e.nonTerminals=0;return n}},{key:"expandNonTerminal",value:function(e,t,n,r){var a,c=r.before,i=r.depth,s=r.nonTerminals,o=this.rules[e.symbol],u=Object(_.a)(o);try{for(u.s();!(a=u.n()).done;){var l=a.value;n.push(new z([].concat(Object(p.a)(l),Object(p.a)(t)),c,i+1,s+1))}}catch(h){u.e(h)}finally{u.f()}}},{key:"match",value:function(e,t){var n=[];n.push(new D);var r=new U(new V(""),[],new V(t),[],0),a=new U(new V(""),[new V(t)],void 0,[],0);n[0].add(r);for(var c=0;c<=e.length;c++){n.push(new D);var i,s=Object(_.a)(n[c]);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.isFinished()?this.completer(o,c,n):o.isNonTerminal()?this.predictor(o,c,n):o.isTerminal()&&this.scanner(o,c,n,e)}}catch(u){s.e(u)}finally{s.f()}}return n[e.length].has(a)}},{key:"completer",value:function(e,t,n){var r,a=Object(_.a)(n[e.origin]);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(!c.isFinished()){var i=c;i.symbol.equals(e.left)&&this.nextInRule(i,t,n)}}}catch(s){a.e(s)}finally{a.f()}}},{key:"predictor",value:function(e,t,n){var r,a=Object(_.a)(this.rules[e.symbol.symbol]);try{for(a.s();!(r=a.n()).done;){var c=r.value;n[t].add(new U(e.symbol,[],c[0],c.slice(1),t))}}catch(i){a.e(i)}finally{a.f()}}},{key:"scanner",value:function(e,t,n,r){t!==r.length&&r[t]===e.symbol.symbol[0]&&this.nextInRule(e,t+1,n)}},{key:"nextInRule",value:function(e,t,n){var r=Object(p.a)(e.before);if(e.symbol instanceof M){var a=r.length-1;r[a]instanceof M?r[a]=new M(r[a].symbol+e.symbol.symbol[0]):r.push(new M(e.symbol.symbol[0]))}else r.push(e.symbol);e.symbol instanceof M&&e.symbol.symbol.length>1?n[t].add(new U(e.left,r,new M(e.symbol.symbol.slice(1)),Object(p.a)(e.after),e.origin)):n[t].add(new U(e.left,r,e.after[0],e.after.slice(1),e.origin))}}]),e}()),K=n(121),$=function(e){var t=e.id,n=e.className,r=e.title,a=e.placeholder,c=e.onChange,i=e.value,s=e.aria,o=e.children,u=t||Object(K.a)();return Object(S.jsxs)("div",{className:"".concat(x.a.area," ").concat(n||""),"data-testid":"container",children:[r&&Object(S.jsx)("h2",{className:x.a.title,children:Object(S.jsx)("label",{htmlFor:u,"data-testid":"label",children:r})}),Object(S.jsx)("textarea",{id:u,className:"textarea monospace",onChange:c,draggable:"false",placeholder:"string"===typeof a?a:"Enter text here...",value:i,"aria-label":s}),o&&Object(S.jsx)("div",{className:"children",children:o})]})},H=function(e){var t=e.className,n=b.useContainer(),r=n.rules,a=n.setRules,i=n.setGrammar,s=Object(c.useState)(["",""]),o=Object(l.a)(s,2),u=o[0],h=o[1],f=Object(c.useRef)(0),m=Object(c.useCallback)((function(){return f.current=window.setTimeout((function(){try{i(new Z(r)),h(["ok",""])}catch(e){h(["error","".concat(e)])}}),50),function(){return window.clearTimeout(f.current)}}),[r,i]);return Object(c.useEffect)(m,[r,m]),Object(S.jsx)("div",{className:"".concat(t||""," status-").concat(u[0]," App-bodyComponent"),"data-testid":"rules-input",children:Object(S.jsxs)($,{className:y.a.textarea,value:r,onChange:function(e){a(e.target.value)},title:"Rules",aria:"Rules that describe the grammar",placeholder:"Enter rules here... e.g.\nS -> 1 | 2 | 3\nS -> 4 | 5 | 6",children:[Object(S.jsx)("div",{className:"row1",children:Object(S.jsx)("div",{className:"status",role:"status",children:u[1]})}),Object(S.jsx)("div",{className:"row2",children:Object(S.jsx)("button",{className:"button secondary",onClick:function(e){e.target.blur(),m()},children:"Regenerate Model"})})]})})},X=function(e){var t=e.className,n=b.useContainer(),r=n.input,a=n.setInput,i=n.grammar,s=Object(c.useState)(["",""]),o=Object(l.a)(s,2),u=o[0],h=o[1],f=Object(c.useState)(!1),m=Object(l.a)(f,2),d=m[0],p=m[1],j=Object(c.useRef)(0),v=Object(c.useCallback)((function(){try{if(!i)throw new Error("No grammar object available");i.checkValid();var e=i.matches(r);p(!1),h([e?"ok":"error","Input ".concat(e?"matches":"doesn't match")])}catch(t){p(!0),h(["error","".concat(t)])}}),[r,i]);return Object(c.useEffect)((function(){return j.current=window.setTimeout(v,100),function(){return window.clearTimeout(j.current)}}),[v]),Object(S.jsx)("div",{className:"".concat(t||""," status-").concat(u[0]," App-bodyComponent"),"data-testid":"text-input",children:Object(S.jsxs)($,{className:y.a.textarea,value:r,onChange:function(e){a(e.target.value)},title:"Test Input",aria:"Input to match with grammar",children:[Object(S.jsx)("div",{className:"row1",children:Object(S.jsx)("span",{className:"status",role:"status",children:u[1]})}),Object(S.jsx)("div",{className:"row2",children:Object(S.jsx)("button",{className:"button secondary",onClick:function(e){e.target.blur(),v()},disabled:d,children:"Re-Match"})})]})})},ee=function(e){var t=e.className;return Object(S.jsx)("div",{className:"".concat(t||""," ").concat(d.a.grid," App-body"),children:Object(S.jsxs)(b.Provider,{initialState:window.location.hash,children:[Object(S.jsx)(H,{className:d.a.left}),Object(S.jsx)(X,{className:d.a.rightTop}),Object(S.jsx)(E,{className:d.a.rightBottom})]})})},te=function(e){var t=e.className,n=(new Date).getFullYear().toString(),r="2020",a="Constantin Piber",c="https://github.com/cpiber/cfg-tester";return Object(S.jsxs)("footer",{className:"".concat(t||""," App-footer"),children:[n===r?n:"".concat(r,"-").concat(n)," by ".concat(a),Object(S.jsxs)(i.a.Fragment,{children:[Object(S.jsx)("span",{children:" :: "}),Object(S.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:"Source"})]})]})},ne=function(e){var t=e.className;return Object(S.jsx)("header",{className:"".concat(t||""," App-header"),children:Object(S.jsxs)("h1",{children:[Object(S.jsx)("abbr",{title:"Context-free grammar",children:"CFG"})," Testing suite"]})})},re=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(ne,{}),Object(S.jsx)(ee,{}),Object(S.jsx)(te,{})]})};n(229),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(S.jsx)(re,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},26:function(e,t,n){e.exports={textarea:"bodyComponent_textarea__2AEVB"}},27:function(e,t,n){e.exports={area:"textarea_area__1mQmu",title:"textarea_title__3f-Ka"}},38:function(e,t,n){e.exports={grid:"Body_grid__2Eze4",left:"Body_left__3afN_",rightTop:"Body_rightTop__x95CP",rightBottom:"Body_rightBottom__2q8gj"}},68:function(e,t,n){e.exports={strings:"GrammarOutput_strings__syveZ",empty:"GrammarOutput_empty__3tYL_"}}},[[230,1,2]]]);
//# sourceMappingURL=main.15c84e7f.chunk.js.map