(this["webpackJsonpcfg-tester"]=this["webpackJsonpcfg-tester"]||[]).push([[0],{118:function(e,t,n){e.exports={strings:"GrammarOutput_strings__syveZ"}},124:function(e,t,n){},125:function(e,t,n){},144:function(e,t){},146:function(e,t){},156:function(e,t){},158:function(e,t){},185:function(e,t){},186:function(e,t){},191:function(e,t){},22:function(e,t,n){e.exports={textarea:"bodyComponent_textarea__2AEVB"}},226:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),s=n(114),c=n.n(s),i=(n(124),n(125),n(32)),o=n.n(i),l=n(0);var u=function(e){return Object(l.jsx)("header",{className:"".concat(e.className?e.className:""," App-header"),children:Object(l.jsxs)("h1",{children:[Object(l.jsx)("abbr",{title:"Context-free grammar",children:"CFG"})," Testing suite"]})})},h=n(6),b=n(62),d=n.n(b),j=n(115),m=Object(j.a)((function(){var e=Object(a.useState)(""),t=Object(h.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(""),c=Object(h.a)(s,2),i=c[0],o=c[1],l=Object(a.useState)(void 0),u=Object(h.a)(l,2),b=u[0],j=u[1];return Object(a.useEffect)((function(){window.location.hash=d.a.stringify({rules:n,input:i})}),[n,i]),{rules:n,setRules:r,input:i,setInput:o,grammar:b,setGrammar:j,updateQuery:function(e){var t=d.a.parse(e);r("string"===typeof t.rules?t.rules:""),o("string"===typeof t.input?t.input:"")}}})),f=n(22),p=n.n(f),g=n(116),v=n.n(g),O=n(23),x=n.n(O),N=function(e){var t=v()();return Object(l.jsxs)("div",{className:"".concat(x.a.area," ").concat(e.className?e.className:""),children:[e.title&&Object(l.jsx)("h2",{className:x.a.title,children:Object(l.jsx)("label",{htmlFor:t,children:e.title})}),Object(l.jsx)("textarea",{id:t,className:"textarea monospace",onChange:e.onChange,draggable:"false",placeholder:e.placeholder?e.placeholder:"Enter text here...",value:e.value,"aria-label":e.aria}),e.children&&Object(l.jsx)("div",{className:"children",children:e.children})]})},w=n(16),y=n(13),k=n(38),_=n(119),S=n(15),T=n(40),C=n(39),A=n(63),E=n.n(A),I=n(117),G=/(\\*)\|/g,R=/(\\(?:n|r|t|f))|\\(.)/g,F=function e(t){Object(y.a)(this,e),this.symbol=void 0,this.symbol=t},D=function e(t){Object(y.a)(this,e),this.symbol=void 0,this.symbol=t},M=function(e){Object(T.a)(n,e);var t=Object(C.a)(n);function n(){return Object(y.a)(this,n),t.call(this,"")}return n}(D),Q=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(y.a)(this,e),this.rule=void 0,this.before=void 0,this.depth=void 0,this.consecutiveNonTerminals=void 0,this.rule=t,this.before=n,this.depth=a,this.consecutiveNonTerminals=r},$=/^\s*([A-Z])\s*(?:->|\u2192)\s*(.*)$/,B=/(\\*)([A-Z])/g,P=function(e){Object(T.a)(n,e);var t=Object(C.a)(n);function n(e){var a;Object(y.a)(this,n),a=t.call(this);var r=e.split(/\r\n|\r|\n/g);for(var s in a.parseRules(r),a.rules)a.parseNonTerminals(a.rules[s]);return console.debug(a.rules),a}return Object(k.a)(n,[{key:"parseRules",value:function(e){for(var t=$,n=0;n<e.length;n++){var a=e[n];if(""!==a.trim()){var r=a.match(t);if(!r)throw new Error("Syntax error on line ".concat(n+1,": ").concat(this.lineToError(a)));for(var s=[],c=void 0,i=0;null!==(c=G.exec(r[2]));)if(c[1].length%2===0){var o=r[2].substring(i,c.index+c[1].length);s.push(this.branchToTerminal(o.trim())),i=G.lastIndex}var l=r[2].substring(i);s.push(this.branchToTerminal(l.trim()));var u,h=s.map((function(e){return[e]}));if(r[1]in this.rules)(u=this.rules[r[1]]).push.apply(u,Object(w.a)(h));else this.rules[r[1]]=h}}}},{key:"parseNonTerminals",value:function(e){for(var t=0;t<e.length;t++){for(var n=e[t][0].symbol,a=B,r=void 0,s=[],c=0;null!==(r=a.exec(n));)if(r[1].length%2===0&&r[2]in this.rules){var i=n.substring(c,r.index);""!==i&&s.push(this.branchToTerminal(i)),s.push(new F(r[2])),c=a.lastIndex}var o=n.substring(c).trim();""!==o&&s.push(this.branchToTerminal(o)),s.length||s.push(new M),e[t]=s}}},{key:"branchToTerminal",value:function(e){return"^"===e||"\u03b5"===e||""===e?new M:new D(e.replace(R,"$1$2"))}},{key:"lineToError",value:function(e){return-1===e.indexOf("->")&&-1===e.indexOf("\u2192")?"Rule indicator '->' missing":"Non-terminal symbols must be single capital letters"}},{key:"clear",value:function(){this.initGenerator("S")}},{key:"checkExpandable",value:function(){if(!("S"in this.rules))throw new Error("Startsymbol 'S' not found")}},{key:"next",value:function(){return Object(_.a)(Object(S.a)(n.prototype),"next",this).call(this)}}]),n}(function(){function e(){Object(y.a)(this,e),this.gen=void 0,this.maxDepth=+(window.localStorage.getItem("cfg_maxdepth")||20),this.maxNonTerms=+(window.localStorage.getItem("cfg_maxnonterm")||10),this.rules={}}return Object(k.a)(e,[{key:"initGenerator",value:function(e){var t=E.a.mark(a),n=this;function a(e){var a,r,s,c,i,o,l,u,h,b,d;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.shift())){t.next=29;break}for(s=(r=a).rule,c=r.before,i=r.depth,o=r.consecutiveNonTerminals,l=s.shift();l instanceof D;)c+=l.symbol,l=s.shift(),o=0;if(void 0!==l){t.next=8;break}return t.next=7,c;case 7:return t.abrupt("continue",0);case 8:u=n.rules[l.symbol],h=Object(I.a)(u),t.prev=10,h.s();case 12:if((b=h.n()).done){t.next=19;break}if(!((d=b.value)[0]instanceof F&&(i>n.maxDepth||o>n.maxNonTerms))){t.next=16;break}return t.abrupt("continue",17);case 16:e.push(new Q([].concat(Object(w.a)(d),Object(w.a)(s)),c,i+1,o+1));case 17:t.next=12;break;case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(10),h.e(t.t0);case 24:return t.prev=24,h.f(),t.finish(24);case 27:t.next=0;break;case 29:return t.abrupt("return",void 0);case 30:case"end":return t.stop()}}),t,null,[[10,21,24,27]])}this.gen=a([new Q([new F(e)])])}},{key:"next",value:function(){if(!this.gen)throw new Error("Attempted to call .next without a generator, this should never happen!");return this.gen.next().value}}]),e}()),Z=function(e){var t=m.useContainer(),n=t.rules,r=t.setRules,s=t.setGrammar,c=Object(a.useState)(["",""]),i=Object(h.a)(c,2),o=i[0],u=i[1],b=Object(a.useCallback)((function(){window.clearTimeout(0),window.setTimeout((function(e){try{s(new P(e)),u(["",""])}catch(t){u(["error","".concat(t)])}}),10,n)}),[n,s,0]);return Object(a.useEffect)(b,[n,b]),Object(l.jsx)("div",{className:"".concat(e.className?e.className:""," status-").concat(o[0]," App-bodyComponent"),children:Object(l.jsxs)(N,{className:p.a.textarea,value:n,onChange:function(e){r(e.target.value)},title:"Rules",aria:"Rules that describe the grammar",children:[Object(l.jsx)("div",{className:"row1",children:Object(l.jsx)("div",{className:"status",children:o[1]})}),Object(l.jsx)("div",{className:"row2",children:Object(l.jsx)("button",{className:"button secondary",onClick:function(e){e.target.blur(),b()},children:"Regenerate Model"})})]})})},q=function(e){var t=m.useContainer(),n=Object(a.useState)("Matching is not implemented yet"),r=Object(h.a)(n,1)[0],s=Object(a.useState)(!1),c=Object(h.a)(s,1)[0];return Object(l.jsx)("div",{className:"".concat(e.className?e.className:""," App-bodyComponent"),children:Object(l.jsxs)(N,{className:p.a.textarea,value:t.input,onChange:function(e){return t.setInput(e.target.value)},title:"Test Input",aria:"Input to match with grammar",children:[Object(l.jsx)("div",{className:"row1",children:Object(l.jsx)("span",{className:"status",children:r})}),Object(l.jsx)("div",{className:"row2",children:Object(l.jsx)("button",{className:"button secondary",onClick:function(e){e.target.blur()},disabled:c,children:"Re-Match"})})]})})},J=n(118),V=n.n(J),W="cfg_gen_number",Y=function(e){var t=m.useContainer().grammar,n=Object(a.useState)([]),r=Object(h.a)(n,2),s=r[0],c=r[1],i=Object(a.useState)(!1),o=Object(h.a)(i,2),u=o[0],b=o[1],d=+(window.localStorage.getItem(W)||15),j=Object(a.useState)(d>=1?d:1),f=Object(h.a)(j,2),g=f[0],v=f[1],O=Object(a.useState)(["",""]),N=Object(h.a)(O,2),y=N[0],k=N[1],_=function(){c([]);try{null===t||void 0===t||t.checkExpandable(),null===t||void 0===t||t.clear(),b(!1),k(["",""])}catch(e){b(!0),k(["error","".concat(e)])}};Object(a.useEffect)(_,[t]);var S=Object(a.useMemo)((function(){return s.map((function(e,t){return Object(l.jsx)("li",{className:"monospace",children:e.toString().split(/\r\n|\r|\n|\\n/g).map((function(e,t){return Object(l.jsx)("span",{children:e},t)}))},t)}))}),[s]);return Object(l.jsx)("div",{className:"".concat(e.className?e.className:""," status-").concat(y[0]," App-bodyComponent"),children:Object(l.jsxs)("div",{className:"".concat(x.a.area," ").concat(p.a.textarea),children:[Object(l.jsx)("h2",{className:x.a.title,children:"Strings"}),Object(l.jsx)("div",{className:V.a.strings,children:Object(l.jsx)("ul",{children:S})}),Object(l.jsxs)("div",{className:"children",children:[Object(l.jsx)("div",{className:"row1",children:Object(l.jsx)("span",{className:"status",children:y[1]})}),Object(l.jsxs)("div",{className:"row2",children:[Object(l.jsxs)("button",{className:"button secondary",onClick:function(e){if(e.target){var n=e.target;if("INPUT"!==n.tagName&&(n.blur(),t)){b(!0);for(var a=[],r=0;r<g;r++){var i=t.next();if(void 0===i)break;a.push(i)}c([].concat(Object(w.a)(s),a)),a.length<g?k(["info","Grammmar exhausted"]):b(!1)}}},disabled:u,"aria-label":"Get more strings",children:["Get ",Object(l.jsx)("input",{type:"number",className:"input secondary_alt",size:4,value:g,onChange:function(e){var t=+e.target.value;v(t>=1?t:1),window.localStorage.setItem(W,t.toString())},"aria-label":"Number of strings to get"})," more"]}),Object(l.jsx)("button",{className:"button secondary",onClick:function(e){e.target&&(e.target.blur(),_())},"aria-label":"Clear strings",children:"Clear"})]})]})]})})},z=!1,H=function(){var e=m.useContainer().updateQuery;return z||(z=!0,window.addEventListener("hashchange",(function(){return e(window.location.hash)})),e(window.location.hash)),Object(l.jsx)(r.a.Fragment,{})},K=function(e){return Object(l.jsx)("div",{className:e.className,children:Object(l.jsxs)(m.Provider,{children:[Object(l.jsx)(H,{}),Object(l.jsx)(Z,{className:e.grid[0]}),Object(l.jsx)(q,{className:e.grid[1]}),Object(l.jsx)(Y,{className:e.grid[2]})]})})};var L=function(e){var t=(new Date).getFullYear().toString(),n="2020",a="Constantin Piber",s="https://github.com/cpiber/cfg-tester";return Object(l.jsxs)("footer",{className:"".concat(e.className?e.className:""," App-footer"),children:[t===n?t:"".concat(n,"-").concat(t)," by ".concat(a),Object(l.jsxs)(r.a.Fragment,{children:[Object(l.jsx)("span",{children:" :: "}),Object(l.jsx)("a",{href:s,target:"_blank",rel:"noopener noreferrer",children:"Source"})]})]})};var U=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{}),Object(l.jsx)(K,{className:o.a.grid,grid:[o.a.grid1,o.a.grid2,o.a.grid3]}),Object(l.jsx)(L,{})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(l.jsx)(U,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},23:function(e,t,n){e.exports={area:"textarea_area__1mQmu",title:"textarea_title__3f-Ka"}},32:function(e,t,n){e.exports={grid:"App_grid__2VrY5",grid1:"App_grid1__2oQkD",grid2:"App_grid2__3nSqq",grid3:"App_grid3__1XHgO"}}},[[226,1,2]]]);
//# sourceMappingURL=main.4b0f1539.chunk.js.map