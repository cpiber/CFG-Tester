(this["webpackJsonpcfg-tester"]=this["webpackJsonpcfg-tester"]||[]).push([[0],{120:function(e,t,n){e.exports={strings:"GrammarOutput_strings__syveZ"}},126:function(e,t,n){},146:function(e,t){},148:function(e,t){},158:function(e,t){},160:function(e,t){},187:function(e,t){},188:function(e,t){},193:function(e,t){},227:function(e,t,n){},228:function(e,t,n){"use strict";n.r(t);var a,r,c=n(2),i=n.n(c),s=n(118),o=n.n(s),l=(n(126),n(19)),u=n(5),h=n(67),f=n.n(h),b=n(119),m=Object(b.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=function(e){var t=f.a.parse(e);return{rules:"string"===typeof t.rules?t.rules:"",input:"string"===typeof t.input?t.input:""}},n=Object(c.useState)(t(e)),a=Object(u.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(void 0),o=Object(u.a)(s,2),h=o[0],b=o[1],m=Object(c.useCallback)((function(e){return i(Object(l.a)(Object(l.a)({},r),{},{rules:e}))}),[r,i]),d=Object(c.useCallback)((function(e){return i(Object(l.a)(Object(l.a)({},r),{},{input:e}))}),[r,i]),v=Object(c.useCallback)((function(e){return i(t(e))}),[i]);Object(c.useEffect)((function(){var e=function(){return v(window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[v]);var j=Object(c.useRef)(0);return Object(c.useEffect)((function(){return j.current=window.setTimeout((function(){return window.location.hash=f.a.stringify(r)}),100),function(){return window.clearTimeout(j.current)}}),[r]),Object(c.useEffect)((function(){window.grammar=h}),[h]),Object(l.a)(Object(l.a)({},r),{},{setRules:m,setInput:d,grammar:h,setGrammar:b,updateQuery:v})})),d=n(38),v=n.n(d),j=n(13),p=function(e,t,n){return Math.min(Math.max(e,t),n)},g=n(25),O=n.n(g),y=n(120),x=n.n(y),w=n(26),k=n.n(w),N=n(0),T="cfg_gen_number",S=p(+(window.localStorage.getItem(T)||15),1,999),E=function(e){var t=e.className,n=m.useContainer().grammar,a=Object(c.useState)(new Set),r=Object(u.a)(a,2),i=r[0],s=r[1],o=Object(c.useState)(!1),l=Object(u.a)(o,2),h=l[0],f=l[1],b=Object(c.useState)(S),d=Object(u.a)(b,2),v=d[0],g=d[1],y=Object(c.useState)(["",""]),w=Object(u.a)(y,2),E=w[0],_=w[1],C=function(){s(new Set);try{null===n||void 0===n||n.checkValid(),null===n||void 0===n||n.clear(),f(!1),_(["",""])}catch(e){f(!0),_(["error","".concat(e)])}};Object(c.useEffect)(C,[n]);var I=Object(c.useMemo)((function(){return Object(j.a)(i.values()).map((function(e,t){return Object(N.jsx)("li",{className:"monospace",children:e.toString().split(/\r\n|\r|\n|\\n/g).map((function(e,t){return Object(N.jsx)("span",{children:e},t)}))},t)}))}),[i]);return Object(N.jsx)("div",{className:"".concat(t||""," status-").concat(E[0]," App-bodyComponent"),children:Object(N.jsxs)("div",{className:"".concat(k.a.area," ").concat(O.a.textarea),children:[Object(N.jsx)("h2",{className:k.a.title,children:"Strings"}),Object(N.jsx)("div",{className:x.a.strings,children:Object(N.jsx)("ul",{children:I})}),Object(N.jsxs)("div",{className:"children",children:[Object(N.jsx)("div",{className:"row1",children:Object(N.jsx)("span",{className:"status",children:E[1]})}),Object(N.jsxs)("div",{className:"row2",children:[Object(N.jsxs)("button",{className:"button secondary",onClick:function(e){if(function(e,t){if(!e.target)return!1;var n=e.target;return"INPUT"!==n.tagName&&(n.blur(),!!t)}(e,n)){f(!0),_(["",""]);var t,a=!1;for(t=0;t<v;t++){var r=n.next();if(void 0===r)break;if(r instanceof Error){a=!0,_(["warn",r.message]);break}i.add(r)}s(new Set(i)),t<v&&!a?_(["info","Grammmar exhausted"]):f(!1)}},disabled:h,"aria-label":"Get more strings",children:["Get ",Object(N.jsx)("input",{type:"number",className:"input secondary_alt",size:3,value:v,onChange:function(e){var t=p(+e.target.value,1,999);g(t),window.localStorage.setItem(T,t.toString())},"aria-label":"Number of strings to get"})," more"]}),Object(N.jsx)("button",{className:"button secondary",onClick:function(e){e.target&&(e.target.blur(),C())},"aria-label":"Clear strings",children:"Clear"})]})]})]})})},_=n(11),C=n(14),I=n(44),R=n(29),B=n(28),A=n(45),G=n(15),F=n(27),M=n.n(F),V=n(17);a=Symbol.iterator,r=Symbol.toStringTag;var $=function(){function e(){Object(_.a)(this,e),this.map=new Map,this[a]=this.values,this[r]=void 0}return Object(C.a)(e,[{key:"size",get:function(){return this.map.size}},{key:"add",value:function(e){return this.map.set(e.hash(),e),this}},{key:"delete",value:function(e){return this.map.delete(e.hash())}},{key:"forEach",value:function(e,t){var n=this;this.map.forEach((function(t,a,r){return e(t,t,n)}),t)}},{key:"has",value:function(e){return this.map.has(e.hash())}},{key:"entries",value:function(){var e=this;return M.a.mark((function t(){var n,a,r,c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(V.a)(e.map),t.prev=1,n.s();case 3:if((a=n.n()).done){t.next=9;break}return r=Object(u.a)(a.value,2),c=r[1],t.next=7,[c,c];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:return t.abrupt("return",void 0);case 18:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))()}},{key:"clear",value:function(){return this.map.clear()}},{key:"keys",value:function(){return this.map.values()}},{key:"values",value:function(){return this.map.values()}}]),e}(),q=/(\\*)\|/g,z=/(\\(?:n|r|t|f))|\\(.)/g,P=/(^|[^\\])(\\\\)*\\$/g,D=function e(t){Object(_.a)(this,e),this.symbol=void 0,this.symbol=t},Z=function(e){Object(R.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"equals",value:function(e){return e instanceof n&&e.symbol===this.symbol}}]),n}(D),J=function(e){Object(R.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(C.a)(n,[{key:"equals",value:function(e){return e instanceof n&&e.symbol===this.symbol}}]),n}(D),L=function(e){Object(R.a)(n,e);var t=Object(B.a)(n);function n(){return Object(_.a)(this,n),t.call(this,"")}return n}(J),Q=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(_.a)(this,e),this.rule=void 0,this.before=void 0,this.depth=void 0,this.nonTerminals=void 0,this.rule=t,this.before=n,this.depth=a,this.nonTerminals=r},U=function(){function e(t,n,a,r,c){Object(_.a)(this,e),this.left=void 0,this.before=void 0,this.symbol=void 0,this.after=void 0,this.origin=void 0,this.left=t,this.before=n,this.symbol=a,this.after=r,this.origin=c}return Object(C.a)(e,[{key:"isFinished",value:function(){return void 0===this.symbol||this.symbol instanceof L}},{key:"isTerminal",value:function(){return this.symbol instanceof J}},{key:"isNonTerminal",value:function(){return this.symbol instanceof Z}},{key:"hash",value:function(){var e,t=function(e,t){return e+t.symbol};return"".concat(this.left.symbol,"\u2192").concat(this.before.reduce(t,""),"\u2022").concat((null===(e=this.symbol)||void 0===e?void 0:e.symbol)||"").concat(this.after.reduce(t,""),",").concat(this.origin)}}]),e}(),W=/^\s*([A-Z])\s*(?:->|\u2192)\s*((?:.|\n)*)$/m,K=/(\\*)([A-Z])/g,Y=function(e){Object(R.a)(n,e);var t=Object(B.a)(n);function n(e){var a,r;Object(_.a)(this,n),r=t.call(this);var c=Object(A.a)((a=Object(I.a)(r),Object(G.a)(n.prototype)),"prepareRules",a).call(a,e);for(var i in r.parseRules(c),r.rules)r.parseNonTerminals(r.rules[i]);return r}return Object(C.a)(n,[{key:"parseRules",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null!==n){var a=n.match(W);if(!a)throw new Error("Syntax error on line ".concat(t+1,": ").concat(this.lineToError(n)));var r,c=this.toBranches(a[2],this.branchToTerminal).map((function(e){return[e]}));if(a[1]in this.rules)(r=this.rules[a[1]]).push.apply(r,Object(j.a)(c));else this.rules[a[1]]=c}}}},{key:"parseNonTerminals",value:function(e){for(var t=0;t<e.length;t++){for(var n=e[t][0].symbol,a=void 0,r=[],c=0;null!==(a=K.exec(n));)if(a[1].length%2===0&&a[2]in this.rules){var i=n.substring(c,a.index);""!==i&&r.push(this.branchToTerminal(i,!0)),r.push(new Z(a[2])),c=K.lastIndex}var s=n.substring(c);""!==s&&r.push(this.branchToTerminal(s,!0)),r.length||r.push(new L),e[t]=r}}},{key:"branchToTerminal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"^"===e||"\u03b5"===e||""===e?new L:new J(t?e.replace(z,"$1$2"):e)}},{key:"lineToError",value:function(e){return console.error("Error on line:",e),-1===e.indexOf("->")&&-1===e.indexOf("\u2192")?"Rule indicator '->' missing":"Non-terminal symbols must be single capital letters"}},{key:"clear",value:function(){this.initGenerator("S")}},{key:"checkValid",value:function(){if(Object(A.a)(Object(G.a)(n.prototype),"checkValid",this).call(this),!("S"in this.rules))throw new Error("Startsymbol 'S' not found")}},{key:"matches",value:function(e){return Object(A.a)(Object(G.a)(n.prototype),"match",this).call(this,e,"S")}}]),n}(function(){function e(){Object(_.a)(this,e),this.gen=void 0,this.maxDepth=+(window.localStorage.getItem("cfg_maxdepth")||20),this.maxNonTerms=+(window.localStorage.getItem("cfg_maxnonterm")||10),this.maxIter=+(window.localStorage.getItem("cfg_iter")||5e3),this.rules={}}return Object(C.a)(e,[{key:"next",value:function(){if(!this.gen)throw new Error("Attempted to call .next without a generator, this should never happen!");return this.gen.next().value}},{key:"checkValid",value:function(){for(var e in this.rules){var t,n=this.rules[e],a=Object(V.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(0===r.length)throw new Error("Empty rule, this should never happen!");if(1===r.length&&""===r[0].symbol&&!(r[0]instanceof L))throw new Error("Empty symbol that isn't an EmptySymbol, this should never happen!");if(r.length>1&&-1!==r.findIndex((function(e){return e instanceof L||0===e.symbol.length})))throw new Error("EmptySymbol found in a longer rule, this should never happen!")}}catch(c){a.e(c)}finally{a.f()}}}},{key:"prepareRules",value:function(e){return e.split(/\r\n|\r|\n/g).map((function(e,t,n){var a=e.trim();if(""===a)return null;if(a.match(P)){if(t+1===n.length)return a.slice(0,a.length-1);var r=a.slice(0,a.length-1)+n[t+1].trim();return n[t+1]="",r}return a}))}},{key:"toBranches",value:function(e,t){for(var n,a=function(e){return e.trim().replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\f/g,"\f")},r=[],c=0;null!==(n=q.exec(e));)if(n[1].length%2===0){var i=e.substring(c,n.index+n[1].length);r.push(t(a(i))),c=q.lastIndex}var s=e.substring(c);return r.push(t(a(s))),r}},{key:"initGenerator",value:function(e){var t=M.a.mark(r),n=this,a=0;function r(e){var r,c,i,s,o,l,u;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.shift())){t.next=18;break}if(a++,c=n.expandTerminal(r),s=(i=r).rule,o=i.before,l=i.depth,u=i.nonTerminals,void 0!==c){t.next=9;break}return t.next=7,o;case 7:return a=0,t.abrupt("continue",0);case 9:if(!(a>=n.maxIter)){t.next=13;break}return t.next=12,new Error("Iterated ".concat(a," times without finding a new value"));case 12:a=0;case 13:if(!(l>n.maxDepth||u>n.maxNonTerms)){t.next=15;break}return t.abrupt("continue",0);case 15:n.expandNonTerminal(c,s,e,r),t.next=0;break;case 18:return t.abrupt("return",void 0);case 19:case"end":return t.stop()}}),t)}this.gen=r([new Q([new Z(e)])])}},{key:"expandTerminal",value:function(e){for(var t=e.rule,n=t.shift();n instanceof J;)e.before+=n.symbol,n=t.shift(),e.nonTerminals=0;return n}},{key:"expandNonTerminal",value:function(e,t,n,a){var r,c=a.before,i=a.depth,s=a.nonTerminals,o=this.rules[e.symbol],l=Object(V.a)(o);try{for(l.s();!(r=l.n()).done;){var u=r.value;n.push(new Q([].concat(Object(j.a)(u),Object(j.a)(t)),c,i+1,s+1))}}catch(h){l.e(h)}finally{l.f()}}},{key:"match",value:function(e,t){var n=[];n.push(new $);var a=new U(new Z(""),[],new Z(t),[],0),r=new U(new Z(""),[new Z(t)],void 0,[],0);n[0].add(a);for(var c=0;c<=e.length;c++){n.push(new $);var i,s=Object(V.a)(n[c]);try{for(s.s();!(i=s.n()).done;){var o=i.value;if(o.isFinished())this.completer(o,c,n);else if(o.isNonTerminal())this.predictor(o,c,n);else{if(!o.isTerminal())throw new Error("Unknown symbol type, this should never happen!");this.scanner(o,c,n,e)}}}catch(l){s.e(l)}finally{s.f()}}return n[e.length].has(r)}},{key:"completer",value:function(e,t,n){var a,r=Object(V.a)(n[e.origin]);try{for(r.s();!(a=r.n()).done;){var c=a.value;if(!c.isFinished()){var i=c;i.symbol.equals(e.left)&&this.nextInRule(i,t,n)}}}catch(s){r.e(s)}finally{r.f()}}},{key:"predictor",value:function(e,t,n){var a,r=Object(V.a)(this.rules[e.symbol.symbol]);try{for(r.s();!(a=r.n()).done;){var c=a.value;n[t].add(new U(e.symbol,[],c[0],c.slice(1),t))}}catch(i){r.e(i)}finally{r.f()}}},{key:"scanner",value:function(e,t,n,a){t!==a.length&&a[t]===e.symbol.symbol[0]&&(e.symbol.symbol.length>1?n[t+1].add(new U(e.left,[].concat(Object(j.a)(e.before),[new J(e.symbol.symbol[0])]),new J(e.symbol.symbol.slice(1)),Object(j.a)(e.after),e.origin)):this.nextInRule(e,t+1,n))}},{key:"nextInRule",value:function(e,t,n){var a=e.after.length>=1?e.after[0]:void 0,r=e.after.length>=1?e.after.slice(1):[];n[t].add(new U(e.left,[].concat(Object(j.a)(e.before),[e.symbol]),a,r,e.origin))}}]),e}()),H=n(121),X=n.n(H),ee=function(e){var t=e.id,n=e.className,a=e.title,r=e.placeholder,c=e.onChange,i=e.value,s=e.aria,o=e.children,l=t||X()();return Object(N.jsxs)("div",{className:"".concat(k.a.area," ").concat(n||""),children:[a&&Object(N.jsx)("h2",{className:k.a.title,children:Object(N.jsx)("label",{htmlFor:l,children:a})}),Object(N.jsx)("textarea",{id:l,className:"textarea monospace",onChange:c,draggable:"false",placeholder:"string"===typeof r?r:"Enter text here...",value:i,"aria-label":s}),o&&Object(N.jsx)("div",{className:"children",children:o})]})},te=function(e){var t=e.className,n=m.useContainer(),a=n.rules,r=n.setRules,i=n.setGrammar,s=Object(c.useState)(["",""]),o=Object(u.a)(s,2),l=o[0],h=o[1],f=Object(c.useRef)(0),b=Object(c.useCallback)((function(){return f.current=window.setTimeout((function(){try{i(new Y(a)),h(["ok",""])}catch(e){h(["error","".concat(e)])}}),50),function(){return window.clearTimeout(f.current)}}),[a,i]);return Object(c.useEffect)(b,[a,b]),Object(N.jsx)("div",{className:"".concat(t||""," status-").concat(l[0]," App-bodyComponent"),children:Object(N.jsxs)(ee,{className:O.a.textarea,value:a,onChange:function(e){e.target&&r(e.target.value)},title:"Rules",aria:"Rules that describe the grammar",placeholder:"Enter rules here... e.g.\nS -> 1 | 2 | 3\nS -> 4 | 5 | 6",children:[Object(N.jsx)("div",{className:"row1",children:Object(N.jsx)("div",{className:"status",children:l[1]})}),Object(N.jsx)("div",{className:"row2",children:Object(N.jsx)("button",{className:"button secondary",onClick:function(e){e.target&&(e.target.blur(),b())},children:"Regenerate Model"})})]})})},ne=function(e){var t=e.className,n=m.useContainer(),a=n.input,r=n.setInput,i=n.grammar,s=Object(c.useState)(["",""]),o=Object(u.a)(s,2),l=o[0],h=o[1],f=Object(c.useState)(!1),b=Object(u.a)(f,2),d=b[0],v=b[1],j=Object(c.useRef)(0),p=Object(c.useCallback)((function(){try{if(!i)throw new Error("No grammar object available");i.checkValid();var e=i.matches(a);v(!1),h([e?"ok":"error","Input ".concat(e?"matches":"doesn't match")])}catch(t){v(!0),h(["error","".concat(t)])}}),[a,i]);return Object(c.useEffect)((function(){return j.current=window.setTimeout(p,100),function(){return window.clearTimeout(j.current)}}),[p]),Object(N.jsx)("div",{className:"".concat(t||""," status-").concat(l[0]," App-bodyComponent"),children:Object(N.jsxs)(ee,{className:O.a.textarea,value:a,onChange:function(e){e.target&&r(e.target.value)},title:"Test Input",aria:"Input to match with grammar",children:[Object(N.jsx)("div",{className:"row1",children:Object(N.jsx)("span",{className:"status",children:l[1]})}),Object(N.jsx)("div",{className:"row2",children:Object(N.jsx)("button",{className:"button secondary",onClick:function(e){e.target&&(e.target.blur(),p())},disabled:d,children:"Re-Match"})})]})})},ae=function(e){var t=e.className;return Object(N.jsx)("div",{className:"".concat(t||""," ").concat(v.a.grid," App-body"),children:Object(N.jsxs)(m.Provider,{initialState:window.location.hash,children:[Object(N.jsx)(te,{className:v.a.left}),Object(N.jsx)(ne,{className:v.a.rightTop}),Object(N.jsx)(E,{className:v.a.rightBottom})]})})},re=function(e){var t=e.className,n=(new Date).getFullYear().toString(),a="2020",r="Constantin Piber",c="https://github.com/cpiber/cfg-tester";return Object(N.jsxs)("footer",{className:"".concat(t||""," App-footer"),children:[n===a?n:"".concat(a,"-").concat(n)," by ".concat(r),Object(N.jsxs)(i.a.Fragment,{children:[Object(N.jsx)("span",{children:" :: "}),Object(N.jsx)("a",{href:c,target:"_blank",rel:"noopener noreferrer",children:"Source"})]})]})},ce=function(e){var t=e.className;return Object(N.jsx)("header",{className:"".concat(t||""," App-header"),children:Object(N.jsxs)("h1",{children:[Object(N.jsx)("abbr",{title:"Context-free grammar",children:"CFG"})," Testing suite"]})})},ie=function(){return Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(ce,{}),Object(N.jsx)(ae,{}),Object(N.jsx)(re,{})]})};n(227),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(N.jsx)(ie,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},25:function(e,t,n){e.exports={textarea:"bodyComponent_textarea__2AEVB"}},26:function(e,t,n){e.exports={area:"textarea_area__1mQmu",title:"textarea_title__3f-Ka"}},38:function(e,t,n){e.exports={grid:"Body_grid__2Eze4",left:"Body_left__3afN_",rightTop:"Body_rightTop__x95CP",rightBottom:"Body_rightBottom__2q8gj"}}},[[228,1,2]]]);
//# sourceMappingURL=main.def04d49.chunk.js.map